<!DOCTYPE html>
<html lang="pl" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
      th:replace="fragments :: base(${pageTitle}, ~{::content})">
<div th:fragment="content">
    <link rel="stylesheet" th:href="@{/css/lists.css}" />
    <section>
        <div class="max-w-6xl mx-auto">

            <div class="flex items-center justify-between mb-6">
                <h1 class="text-3xl font-bold tracking-tight"
                    th:text="#{rooms.list.title}">
                    Sale i Pomieszczenia
                </h1>

                <div class="flex items-center gap-4">
                    <a sec:authorize="hasRole('ROLE_ADMIN')"
                       th:href="@{/panel/admin}"
                       class="text-sm text-red-600 hover:text-red-700 font-medium"
                       th:text="#{link.back_to_panel}">
                        ← Powrót do panelu
                    </a>
                    <a sec:authorize="hasRole('ROLE_INSTRUCTOR')"
                       th:href="@{/panel/instructor}"
                       class="text-sm text-green-600 hover:text-green-700 font-medium"
                       th:text="#{link.back_to_panel}">
                        ← Powrót do panelu
                    </a>

                    <a th:href="@{/rooms/new}"
                       class="inline-flex items-center gap-2 px-4 py-2 rounded-md bg-indigo-600 text-white text-sm font-semibold shadow hover:bg-indigo-500 transition">
                        <span class="text-lg">➕</span> <span th:text="#{rooms.btn.add}">Dodaj nową salę</span>
                    </a>
                </div>
            </div>

            <div class="table-wrapper">
                <div class="table-responsive">
                    <table class="min-w-full text-sm">
                        <thead>
                        <tr>
                            <th scope="col"
                                class="px-6 py-3 text-left text-xs font-medium uppercase tracking-wider"
                                th:text="#{room.label.name}">
                                Nazwa
                            </th>
                            <th scope="col"
                                class="px-6 py-3 text-left text-xs font-medium uppercase tracking-wider"
                                th:text="#{room.label.location}">
                                Lokalizacja
                            </th>
                            <th scope="col"
                                class="px-6 py-3 text-left text-xs font-medium uppercase tracking-wider"
                                th:text="#{room.label.capacity}">
                                Pojemność
                            </th>
                            <th scope="col"
                                class="px-6 py-3 text-left text-xs font-medium uppercase tracking-wider"
                                th:text="#{room.label.status}">
                                Status
                            </th>
                            <th scope="col" class="relative px-6 py-3">
                                <span class="sr-only" th:text="#{btn.edit}">Edytuj</span>
                            </th>
                        </tr>
                        </thead>

                        <tbody>
                        <tr th:each="room : ${rooms}">
                            <td class="px-6 py-4 whitespace-nowrap">
                                <div class="text-sm font-medium" th:text="${room.name}"></div>
                            </td>

                            <td class="px-6 py-4 whitespace-nowrap">
                            <span th:if="${room.location != null and not room.location.isBlank()}"
                                  th:text="${room.location}"
                                  class="text-sm"></span>
                                <span th:unless="${room.location != null and not room.location.isBlank()}"
                                      class="text-sm muted"
                                      th:text="#{label.none}">
                                Brak
                            </span>
                            </td>

                            <td class="px-6 py-4 whitespace-nowrap">
                                <span th:text="${room.capacity} + ' ' + #{panel.label.seats}" class="text-sm"></span>
                            </td>

                            <td class="px-6 py-4 whitespace-nowrap">
                            <span th:if="${room.active}"
                                  class="px-2.5 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800"
                                  th:text="#{status.active}">
                                Aktywna
                            </span>
                                <span th:unless="${room.active}"
                                      class="px-2.5 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-700"
                                      th:text="#{status.inactive}">
                                Nieaktywna
                            </span>
                            </td>

                            <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                                <div class="flex items-center justify-end gap-x-2">
                                    <a th:href="@{/rooms/edit/{id}(id=${room.id})}"
                                       class="inline-flex items-center px-2.5 py-1.5 rounded-md text-xs font-medium bg-indigo-600 text-white hover:bg-indigo-700 shadow-sm"
                                       th:text="#{btn.edit}">
                                        Edytuj
                                    </a>

                                    <form th:action="@{/rooms/delete/{id}(id=${room.id})}"
                                          method="post"
                                          th:attr="onsubmit='return confirm(\'' + #{rooms.confirm.delete} + '\');'">
                                        <button type="submit"
                                                class="inline-flex items-center px-2.5 py-1.5 rounded-md text-xs font-medium bg-red-600 text-white hover:bg-red-700 shadow-sm"
                                                th:text="#{btn.delete}">
                                            Usuń
                                        </button>
                                    </form>
                                </div>
                            </td>

                        </tr>

                        <tr th:if="${#lists.isEmpty(rooms)}">
                            <td colspan="5" class="px-6 py-12 text-center">
                                <p class="text-sm muted" th:text="#{rooms.list.empty}">
                                    Nie dodano jeszcze żadnych sal.
                                </p>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>

        </div>
    </section>
</div>
</html>
