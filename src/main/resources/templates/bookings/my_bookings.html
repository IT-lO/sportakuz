<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="pl" th:replace="~{fragments :: base('Moje Rezerwacje', ~{::content})}">
<div th:fragment="content">
    <link rel="stylesheet" th:href="@{/css/my_bookings.css}" />
    <script th:inline="javascript">
        /*<![CDATA[*/
        window.__bookings = /*[[${bookings}]]*/ [];
        /*]]>*/
    </script>
    <div class="container">
        <div class="header">
            <h1 id="mainTitle" th:text="${pageTitle != null} ? ${pageTitle} : 'Moje rezerwacje'"></h1>
            <p>Twoje aktywne rezerwacje</p>
        </div>
        <div class="reservations-list" id="reservationsList">
            <div th:if="${#lists.isEmpty(bookings)}" class="empty-state">
                <div class="empty-icon">ðŸ“…</div>
                <h3>Brak aktywnych rezerwacji</h3>
                <p>Nie masz obecnie Å¼adnych zarezerwowanych zajÄ™Ä‡ sportowych.</p>
            </div>
            <div th:each="b : ${bookings}" class="reservation-card" th:attr="data-booking-id=${b.id}">
                <button class="cancel-button" type="button" th:attr="data-activity=${b.activityName}" onclick="BookingsPage.showCancelModal(this)">Anuluj rezerwacjÄ™</button>
                <div class="activity-name" th:text="${b.activityName}">Nazwa zajÄ™Ä‡</div>
                <div class="reservation-details">
                    <div class="detail-item"><span class="detail-label">Instruktor:</span> <span class="detail-value instructor-name" th:text="${b.instructor}">Instruktor</span></div>
                    <div class="detail-item"><span class="detail-label">Data:</span> <span class="detail-value" th:text="${b.date}">Data</span></div>
                    <div class="detail-item"><span class="detail-label">Godzina:</span> <span class="detail-value" th:text="${b.time}">Godzina</span></div>
                    <div class="detail-item"><span class="detail-label">Czas trwania:</span> <span class="detail-value" th:text="${b.duration}">60 minut</span></div>
                    <div class="detail-item"><span class="detail-label">Sala:</span> <span class="detail-value" th:text="${b.room}">Sala</span></div>
                </div>
            </div>
        </div>
    </div>
    <div class="modal-overlay" id="cancelModal">
        <div class="modal-content">
            <div class="modal-title">Anulowanie rezerwacji</div>
            <div class="modal-message" id="modalMessage">Czy na pewno chcesz anulowaÄ‡ tÄ™ rezerwacjÄ™?</div>
            <div class="modal-buttons">
                <button class="modal-button confirm-button" type="button" onclick="BookingsPage.confirmCancel()">Tak, anuluj</button>
                <button class="modal-button cancel-modal-button" type="button" onclick="BookingsPage.closeCancelModal()">Nie, zostaw</button>
            </div>
        </div>
    </div>
    <script th:src="@{/js/my_bookings.js}"></script>
</div>
</html>