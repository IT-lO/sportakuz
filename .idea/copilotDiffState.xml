<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/src/main/java/com/icio/sportakuz/classes/web/ClassOccurrenceController.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/src/main/java/com/icio/sportakuz/classes/web/ClassOccurrenceController.java" />
              <option name="originalContent" value="// src/main/java/com/icio/sportakuz/classes/web/ClassOccurrenceController.java&#10;package com.icio.sportakuz.classes.web;&#10;&#10;import com.icio.sportakuz.classes.domain.*; // encje&#10;import com.icio.sportakuz.classes.repo.*;   // repozytoria&#10;import jakarta.validation.Valid;&#10;import org.springframework.stereotype.Controller;&#10;import org.springframework.ui.Model;&#10;import org.springframework.validation.BindingResult;&#10;import org.springframework.web.bind.annotation.*;&#10;import org.springframework.web.servlet.mvc.support.RedirectAttributes;&#10;&#10;import java.time.LocalDateTime;&#10;import java.time.ZoneId;&#10;&#10;@Controller&#10;@RequestMapping(&quot;/classes&quot;)&#10;public class ClassOccurrenceController {&#10;&#10;    private final ClassOccurrenceRepository classOccurrenceRepository;&#10;    private final ClassTypeRepository classTypeRepository;&#10;    private final InstructorRepository instructorRepository;&#10;    private final RoomRepository roomRepository;&#10;&#10;    public ClassOccurrenceController(ClassOccurrenceRepository classOccurrenceRepository,&#10;                                     ClassTypeRepository classTypeRepository,&#10;                                     InstructorRepository instructorRepository,&#10;                                     RoomRepository roomRepository) {&#10;        this.classOccurrenceRepository = classOccurrenceRepository;&#10;        this.classTypeRepository = classTypeRepository;&#10;        this.instructorRepository = instructorRepository;&#10;        this.roomRepository = roomRepository;&#10;    }&#10;&#10;    // LISTA&#10;    @GetMapping&#10;    public String list(Model model) {&#10;        model.addAttribute(&quot;classes&quot;, classOccurrenceRepository.findAll()); // na start prosto&#10;        return &quot;classes/list&quot;;&#10;    }&#10;&#10;    // FORMULARZ&#10;    @GetMapping(&quot;/new&quot;)&#10;    public String createForm(Model model) {&#10;        model.addAttribute(&quot;form&quot;, new ClassOccurrenceForm());&#10;        addLookups(model);&#10;        return &quot;classes/new&quot;;&#10;    }&#10;&#10;    // ZAPIS&#10;    @PostMapping&#10;    public String create(@Valid @ModelAttribute(&quot;form&quot;) ClassOccurrenceForm form,&#10;                         BindingResult binding,&#10;                         Model model,&#10;                         RedirectAttributes ra) {&#10;&#10;        // prosta walidacja: start &lt; end&#10;        if (form.getStartTime() != null &amp;&amp; form.getEndTime() != null&#10;                &amp;&amp; !form.getStartTime().isBefore(form.getEndTime())) {&#10;            binding.rejectValue(&quot;endTime&quot;, &quot;time.order&quot;, &quot;Godzina zakończenia musi być po rozpoczęciu&quot;);&#10;        }&#10;&#10;        // sprawdzenie capacity vs room.capacity – lepiej złapać to przed constraintem z DB&#10;        if (form.getRoomId() != null &amp;&amp; form.getCapacity() != null) {&#10;            Room room = roomRepository.findById(form.getRoomId()).orElse(null);&#10;            if (room != null &amp;&amp; form.getCapacity() &gt; room.getCapacity()) {&#10;                binding.rejectValue(&quot;capacity&quot;, &quot;capacity.room&quot;,&#10;                        &quot;Pojemność zajęć nie może przekraczać pojemności sali (&quot; + room.getCapacity() + &quot;)&quot;);&#10;            }&#10;        }&#10;&#10;        if (binding.hasErrors()) {&#10;            addLookups(model);&#10;            return &quot;classes/new&quot;;&#10;        }&#10;&#10;        // mapowanie form -&gt; encja&#10;        ClassOccurrence oc = new ClassOccurrence();&#10;        oc.setType(classTypeRepository.findById(form.getClassTypeId()).orElseThrow());&#10;        oc.setInstructor(instructorRepository.findById(form.getInstructorId()).orElseThrow());&#10;        oc.setRoom(roomRepository.findById(form.getRoomId()).orElseThrow());&#10;&#10;        // budujemy LocalDateTime z date + times (strefa serwera)&#10;        var zone = ZoneId.of(&quot;Europe/Warsaw&quot;);&#10;        var start = LocalDateTime.of(form.getDate(), form.getStartTime())&#10;                .atZone(zone)&#10;                .toOffsetDateTime();&#10;        var end   = LocalDateTime.of(form.getDate(), form.getEndTime())&#10;                .atZone(zone)&#10;                .toOffsetDateTime();&#10;        oc.setStartTime(start);&#10;        oc.setEndTime(end);&#10;&#10;        oc.setCapacity(form.getCapacity());&#10;        oc.setStatus(ClassStatus.PLANNED); // na start&#10;        oc.setNote(form.getNote());&#10;&#10;        classOccurrenceRepository.save(oc);&#10;&#10;        ra.addFlashAttribute(&quot;success&quot;, &quot;Zajęcia dodane.&quot;);&#10;        return &quot;redirect:/classes&quot;;&#10;    }&#10;&#10;    private void addLookups(Model model) {&#10;        model.addAttribute(&quot;types&quot;, classTypeRepository.findAll());&#10;        model.addAttribute(&quot;instructors&quot;, instructorRepository.findAll());&#10;        model.addAttribute(&quot;rooms&quot;, roomRepository.findAll());&#10;    }&#10;}&#10;" />
              <option name="updatedContent" value="// src/main/java/com/icio/sportakuz/classes/web/ClassOccurrenceController.java&#10;package com.icio.sportakuz.classes.web;&#10;&#10;import com.icio.sportakuz.classes.domain.*; // encje&#10;import com.icio.sportakuz.classes.repo.*;   // repozytoria&#10;import jakarta.validation.Valid;&#10;import org.springframework.stereotype.Controller;&#10;import org.springframework.ui.Model;&#10;import org.springframework.validation.BindingResult;&#10;import org.springframework.web.bind.annotation.*;&#10;import org.springframework.web.servlet.mvc.support.RedirectAttributes;&#10;&#10;import java.time.LocalDateTime;&#10;import java.time.OffsetDateTime;&#10;import java.time.ZoneId;&#10;&#10;@Controller&#10;@RequestMapping(&quot;/classes&quot;)&#10;public class ClassOccurrenceController {&#10;&#10;    private final ClassOccurrenceRepository classOccurrenceRepository;&#10;    private final ClassTypeRepository classTypeRepository;&#10;    private final InstructorRepository instructorRepository;&#10;    private final RoomRepository roomRepository;&#10;&#10;    public ClassOccurrenceController(ClassOccurrenceRepository classOccurrenceRepository,&#10;                                     ClassTypeRepository classTypeRepository,&#10;                                     InstructorRepository instructorRepository,&#10;                                     RoomRepository roomRepository) {&#10;        this.classOccurrenceRepository = classOccurrenceRepository;&#10;        this.classTypeRepository = classTypeRepository;&#10;        this.instructorRepository = instructorRepository;&#10;        this.roomRepository = roomRepository;&#10;    }&#10;&#10;    // LISTA&#10;    @GetMapping&#10;    public String list(Model model) {&#10;        model.addAttribute(&quot;classes&quot;, classOccurrenceRepository.findAll()); // na start prosto&#10;        return &quot;classes/list&quot;;&#10;    }&#10;&#10;    // FORMULARZ&#10;    @GetMapping(&quot;/new&quot;)&#10;    public String createForm(Model model) {&#10;        model.addAttribute(&quot;form&quot;, new ClassOccurrenceForm());&#10;        addLookups(model);&#10;        return &quot;classes/new&quot;;&#10;    }&#10;&#10;    // ZAPIS&#10;    @PostMapping&#10;    public String create(@Valid @ModelAttribute(&quot;form&quot;) ClassOccurrenceForm form,&#10;                         BindingResult binding,&#10;                         Model model,&#10;                         RedirectAttributes ra) {&#10;&#10;        // prosta walidacja: start &lt; end&#10;        if (form.getStartTime() != null &amp;&amp; form.getEndTime() != null&#10;                &amp;&amp; !form.getStartTime().isBefore(form.getEndTime())) {&#10;            binding.rejectValue(&quot;endTime&quot;, &quot;time.order&quot;, &quot;Godzina zakończenia musi być po rozpoczęciu&quot;);&#10;        }&#10;&#10;        // sprawdzenie capacity vs room.capacity – lepiej złapać to przed constraintem z DB&#10;        if (form.getRoomId() != null &amp;&amp; form.getCapacity() != null) {&#10;            Room room = roomRepository.findById(form.getRoomId()).orElse(null);&#10;            if (room != null &amp;&amp; form.getCapacity() &gt; room.getCapacity()) {&#10;                binding.rejectValue(&quot;capacity&quot;, &quot;capacity.room&quot;,&#10;                        &quot;Pojemność zajęć nie może przekraczać pojemności sali (&quot; + room.getCapacity() + &quot;)&quot;);&#10;            }&#10;        }&#10;&#10;        if (binding.hasErrors()) {&#10;            addLookups(model);&#10;            return &quot;classes/new&quot;;&#10;        }&#10;&#10;        // mapowanie form -&gt; encja&#10;        ClassOccurrence oc = new ClassOccurrence();&#10;        oc.setType(classTypeRepository.findById(form.getClassTypeId()).orElseThrow());&#10;        oc.setInstructor(instructorRepository.findById(form.getInstructorId()).orElseThrow());&#10;        oc.setRoom(roomRepository.findById(form.getRoomId()).orElseThrow());&#10;&#10;        // budujemy LocalDateTime z date + times (strefa serwera)&#10;        var zone = ZoneId.of(&quot;Europe/Warsaw&quot;);&#10;        var start = LocalDateTime.of(form.getDate(), form.getStartTime())&#10;                .atZone(zone)&#10;                .toOffsetDateTime();&#10;        var end   = LocalDateTime.of(form.getDate(), form.getEndTime())&#10;                .atZone(zone)&#10;                .toOffsetDateTime();&#10;        oc.setStartTime(start);&#10;        oc.setEndTime(end);&#10;&#10;        oc.setCapacity(form.getCapacity());&#10;        oc.setStatus(ClassStatus.PLANNED); // na start&#10;        oc.setNote(form.getNote());&#10;&#10;        classOccurrenceRepository.save(oc);&#10;&#10;        ra.addFlashAttribute(&quot;success&quot;, &quot;Zajęcia dodane.&quot;);&#10;        return &quot;redirect:/classes&quot;;&#10;    }&#10;&#10;    // USUWANIE&#10;    @PostMapping(&quot;/{id}/delete&quot;)&#10;    public String delete(@PathVariable(&quot;id&quot;) Long id, RedirectAttributes ra) {&#10;        if (id != null &amp;&amp; classOccurrenceRepository.existsById(id)) {&#10;            classOccurrenceRepository.deleteById(id);&#10;            ra.addFlashAttribute(&quot;success&quot;, &quot;Zajęcia #&quot; + id + &quot; usunięte.&quot;);&#10;        } else {&#10;            ra.addFlashAttribute(&quot;success&quot;, &quot;Zajęcia nie znalezione (id=&quot; + id + &quot;).&quot;);&#10;        }&#10;        return &quot;redirect:/classes&quot;;&#10;    }&#10;&#10;    @GetMapping(&quot;/{id}/edit&quot;)&#10;    public String editForm(@PathVariable(&quot;id&quot;) Long id, Model model, RedirectAttributes ra) {&#10;        var oc = classOccurrenceRepository.findById(id).orElse(null);&#10;        if (oc == null) {&#10;            ra.addFlashAttribute(&quot;success&quot;, &quot;Zajęcia nie znalezione (id=&quot; + id + &quot;).&quot;);&#10;            return &quot;redirect:/classes&quot;;&#10;        }&#10;        ClassOccurrenceForm form = toForm(oc);&#10;        model.addAttribute(&quot;form&quot;, form);&#10;        model.addAttribute(&quot;editId&quot;, id);&#10;        addLookups(model);&#10;        return &quot;classes/edit&quot;;&#10;    }&#10;&#10;    @PostMapping(&quot;/{id}&quot;)&#10;    public String update(@PathVariable(&quot;id&quot;) Long id,&#10;                         @Valid @ModelAttribute(&quot;form&quot;) ClassOccurrenceForm form,&#10;                         BindingResult binding,&#10;                         Model model,&#10;                         RedirectAttributes ra) {&#10;        var oc = classOccurrenceRepository.findById(id).orElse(null);&#10;        if (oc == null) {&#10;            ra.addFlashAttribute(&quot;success&quot;, &quot;Zajęcia nie znalezione (id=&quot; + id + &quot;).&quot;);&#10;            return &quot;redirect:/classes&quot;;&#10;        }&#10;&#10;        // walidacje jak przy create&#10;        if (form.getStartTime() != null &amp;&amp; form.getEndTime() != null&#10;                &amp;&amp; !form.getStartTime().isBefore(form.getEndTime())) {&#10;            binding.rejectValue(&quot;endTime&quot;, &quot;time.order&quot;, &quot;Godzina zakończenia musi być po rozpoczęciu&quot;);&#10;        }&#10;        if (form.getRoomId() != null &amp;&amp; form.getCapacity() != null) {&#10;            Room room = roomRepository.findById(form.getRoomId()).orElse(null);&#10;            if (room != null &amp;&amp; form.getCapacity() &gt; room.getCapacity()) {&#10;                binding.rejectValue(&quot;capacity&quot;, &quot;capacity.room&quot;,&#10;                        &quot;Pojemność zajęć nie może przekraczać pojemności sali (&quot; + room.getCapacity() + &quot;)&quot;);&#10;            }&#10;        }&#10;        if (binding.hasErrors()) {&#10;            addLookups(model);&#10;            model.addAttribute(&quot;editId&quot;, id);&#10;            return &quot;classes/edit&quot;;&#10;        }&#10;&#10;        // aktualizacja encji&#10;        oc.setType(classTypeRepository.findById(form.getClassTypeId()).orElseThrow());&#10;        oc.setInstructor(instructorRepository.findById(form.getInstructorId()).orElseThrow());&#10;        oc.setRoom(roomRepository.findById(form.getRoomId()).orElseThrow());&#10;&#10;        var zone = ZoneId.of(&quot;Europe/Warsaw&quot;);&#10;        OffsetDateTime start = LocalDateTime.of(form.getDate(), form.getStartTime()).atZone(zone).toOffsetDateTime();&#10;        OffsetDateTime end   = LocalDateTime.of(form.getDate(), form.getEndTime()).atZone(zone).toOffsetDateTime();&#10;        oc.setStartTime(start);&#10;        oc.setEndTime(end);&#10;        oc.setCapacity(form.getCapacity());&#10;        oc.setNote(form.getNote());&#10;&#10;        classOccurrenceRepository.save(oc);&#10;        ra.addFlashAttribute(&quot;success&quot;, &quot;Zajęcia zaktualizowane.&quot;);&#10;        return &quot;redirect:/classes&quot;;&#10;    }&#10;&#10;    private ClassOccurrenceForm toForm(ClassOccurrence oc) {&#10;        ClassOccurrenceForm f = new ClassOccurrenceForm();&#10;        f.setClassTypeId(oc.getType().getId());&#10;        f.setInstructorId(oc.getInstructor().getId());&#10;        f.setRoomId(oc.getRoom().getId());&#10;        var start = oc.getStartTime();&#10;        var end = oc.getEndTime();&#10;        var zone = ZoneId.of(&quot;Europe/Warsaw&quot;);&#10;        f.setDate(start.atZoneSameInstant(zone).toLocalDate());&#10;        f.setStartTime(start.atZoneSameInstant(zone).toLocalTime());&#10;        f.setEndTime(end.atZoneSameInstant(zone).toLocalTime());&#10;        f.setCapacity(oc.getCapacity());&#10;        f.setNote(oc.getNote());&#10;        return f;&#10;    }&#10;&#10;    private void addLookups(Model model) {&#10;        model.addAttribute(&quot;types&quot;, classTypeRepository.findAll());&#10;        model.addAttribute(&quot;instructors&quot;, instructorRepository.findAll());&#10;        model.addAttribute(&quot;rooms&quot;, roomRepository.findAll());&#10;    }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/src/main/resources/templates/classes/edit.html">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/src/main/resources/templates/classes/edit.html" />
              <option name="updatedContent" value="&lt;!DOCTYPE html&gt;&#10;&lt;html lang=&quot;pl&quot; xmlns:th=&quot;http://www.thymeleaf.org&quot; th:replace=&quot;fragments.html :: base('Edycja zajęć', ~{::section})&quot;&gt;&#10;&lt;section&gt;&#10;    &lt;div class=&quot;max-w-3xl mx-auto space-y-8&quot;&gt;&#10;        &lt;div class=&quot;bg-white/90 backdrop-blur rounded-lg shadow-md border border-gray-200 p-6&quot;&gt;&#10;            &lt;div class=&quot;flex items-center justify-between mb-6&quot;&gt;&#10;                &lt;h1 class=&quot;text-2xl font-semibold text-gray-900&quot;&gt;Edytuj zajęcia #&lt;span th:text=&quot;${editId}&quot;&gt;&lt;/span&gt;&lt;/h1&gt;&#10;                &lt;a th:href=&quot;@{/classes}&quot; class=&quot;text-sm text-blue-600 hover:text-blue-700 font-medium&quot;&gt;← Lista&lt;/a&gt;&#10;            &lt;/div&gt;&#10;            &lt;form th:action=&quot;@{'/classes/' + ${editId}}&quot; th:object=&quot;${form}&quot; method=&quot;post&quot; class=&quot;space-y-6&quot;&gt;&#10;                &lt;div class=&quot;grid grid-cols-1 sm:grid-cols-2 gap-6&quot;&gt;&#10;                    &lt;div&gt;&#10;                        &lt;label class=&quot;block text-sm font-medium text-gray-700 mb-1&quot;&gt;Typ&lt;/label&gt;&#10;                        &lt;select th:field=&quot;*{classTypeId}&quot; class=&quot;w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500&quot;&gt;&#10;                            &lt;option value=&quot;&quot;&gt;-- wybierz --&lt;/option&gt;&#10;                            &lt;option th:each=&quot;t : ${types}&quot; th:value=&quot;${t.id}&quot; th:text=&quot;${t.name}&quot;&gt;&lt;/option&gt;&#10;                        &lt;/select&gt;&#10;                        &lt;p class=&quot;mt-1 text-xs text-red-600&quot; th:if=&quot;${#fields.hasErrors('classTypeId')}&quot; th:errors=&quot;*{classTypeId}&quot;&gt;&lt;/p&gt;&#10;                    &lt;/div&gt;&#10;                    &lt;div&gt;&#10;                        &lt;label class=&quot;block text-sm font-medium text-gray-700 mb-1&quot;&gt;Instruktor&lt;/label&gt;&#10;                        &lt;select th:field=&quot;*{instructorId}&quot; class=&quot;w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500&quot;&gt;&#10;                            &lt;option value=&quot;&quot;&gt;-- wybierz --&lt;/option&gt;&#10;                            &lt;option th:each=&quot;i : ${instructors}&quot; th:value=&quot;${i.id}&quot; th:text=&quot;${i.firstName + ' ' + i.lastName}&quot;&gt;&lt;/option&gt;&#10;                        &lt;/select&gt;&#10;                        &lt;p class=&quot;mt-1 text-xs text-red-600&quot; th:if=&quot;${#fields.hasErrors('instructorId')}&quot; th:errors=&quot;*{instructorId}&quot;&gt;&lt;/p&gt;&#10;                    &lt;/div&gt;&#10;                    &lt;div&gt;&#10;                        &lt;label class=&quot;block text-sm font-medium text-gray-700 mb-1&quot;&gt;Sala&lt;/label&gt;&#10;                        &lt;select th:field=&quot;*{roomId}&quot; class=&quot;w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500&quot;&gt;&#10;                            &lt;option value=&quot;&quot;&gt;-- wybierz --&lt;/option&gt;&#10;                            &lt;option th:each=&quot;r : ${rooms}&quot; th:value=&quot;${r.id}&quot; th:text=&quot;${r.name + ' (cap: ' + r.capacity + ')'}&quot;&gt;&lt;/option&gt;&#10;                        &lt;/select&gt;&#10;                        &lt;p class=&quot;mt-1 text-xs text-red-600&quot; th:if=&quot;${#fields.hasErrors('roomId')}&quot; th:errors=&quot;*{roomId}&quot;&gt;&lt;/p&gt;&#10;                    &lt;/div&gt;&#10;                    &lt;div&gt;&#10;                        &lt;label class=&quot;block text-sm font-medium text-gray-700 mb-1&quot;&gt;Data&lt;/label&gt;&#10;                        &lt;input type=&quot;date&quot; th:field=&quot;*{date}&quot; class=&quot;w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500&quot; /&gt;&#10;                        &lt;p class=&quot;mt-1 text-xs text-red-600&quot; th:if=&quot;${#fields.hasErrors('date')}&quot; th:errors=&quot;*{date}&quot;&gt;&lt;/p&gt;&#10;                    &lt;/div&gt;&#10;                    &lt;div&gt;&#10;                        &lt;label class=&quot;block text-sm font-medium text-gray-700 mb-1&quot;&gt;Start&lt;/label&gt;&#10;                        &lt;input type=&quot;time&quot; th:field=&quot;*{startTime}&quot; class=&quot;w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500&quot; /&gt;&#10;                        &lt;p class=&quot;mt-1 text-xs text-red-600&quot; th:if=&quot;${#fields.hasErrors('startTime')}&quot; th:errors=&quot;*{startTime}&quot;&gt;&lt;/p&gt;&#10;                    &lt;/div&gt;&#10;                    &lt;div&gt;&#10;                        &lt;label class=&quot;block text-sm font-medium text-gray-700 mb-1&quot;&gt;Koniec&lt;/label&gt;&#10;                        &lt;input type=&quot;time&quot; th:field=&quot;*{endTime}&quot; class=&quot;w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500&quot; /&gt;&#10;                        &lt;p class=&quot;mt-1 text-xs text-red-600&quot; th:if=&quot;${#fields.hasErrors('endTime')}&quot; th:errors=&quot;*{endTime}&quot;&gt;&lt;/p&gt;&#10;                    &lt;/div&gt;&#10;                    &lt;div&gt;&#10;                        &lt;label class=&quot;block text-sm font-medium text-gray-700 mb-1&quot;&gt;Pojemność&lt;/label&gt;&#10;                        &lt;input type=&quot;number&quot; min=&quot;1&quot; th:field=&quot;*{capacity}&quot; class=&quot;w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500&quot; /&gt;&#10;                        &lt;p class=&quot;mt-1 text-xs text-red-600&quot; th:if=&quot;${#fields.hasErrors('capacity')}&quot; th:errors=&quot;*{capacity}&quot;&gt;&lt;/p&gt;&#10;                    &lt;/div&gt;&#10;                    &lt;div class=&quot;sm:col-span-2&quot;&gt;&#10;                        &lt;label class=&quot;block text-sm font-medium text-gray-700 mb-1&quot;&gt;Notatka&lt;/label&gt;&#10;                        &lt;textarea rows=&quot;3&quot; th:field=&quot;*{note}&quot; class=&quot;w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500&quot; placeholder=&quot;Dodatkowe informacje...&quot;&gt;&lt;/textarea&gt;&#10;                        &lt;p class=&quot;mt-1 text-xs text-red-600&quot; th:if=&quot;${#fields.hasErrors('note')}&quot; th:errors=&quot;*{note}&quot;&gt;&lt;/p&gt;&#10;                    &lt;/div&gt;&#10;                &lt;/div&gt;&#10;                &lt;div class=&quot;flex items-center gap-3 pt-2&quot;&gt;&#10;                    &lt;button type=&quot;submit&quot; class=&quot;inline-flex items-center justify-center gap-2 px-5 py-2.5 rounded-md bg-blue-600 text-white font-medium shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2&quot;&gt;&#10;                        Zapisz zmiany&#10;                    &lt;/button&gt;&#10;                    &lt;a th:href=&quot;@{/classes}&quot; class=&quot;inline-flex items-center px-5 py-2.5 rounded-md border border-gray-300 bg-white text-gray-700 font-medium hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2&quot;&gt;Anuluj&lt;/a&gt;&#10;                &lt;/div&gt;&#10;            &lt;/form&gt;&#10;        &lt;/div&gt;&#10;    &lt;/div&gt;&#10;&lt;/section&gt;&#10;&lt;/html&gt;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/src/main/resources/templates/classes/list.html">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/src/main/resources/templates/classes/list.html" />
              <option name="originalContent" value="&lt;!DOCTYPE html&gt;&#10;&lt;html lang=&quot;pl&quot; xmlns:th=&quot;http://www.thymeleaf.org&quot; th:replace=&quot;fragments.html :: base('Lista zajęć', ~{::section})&quot;&gt;&#10;&lt;section&gt;&#10;    &lt;div class=&quot;space-y-6&quot;&gt;&#10;        &lt;div class=&quot;flex items-center justify-between&quot;&gt;&#10;            &lt;h1 class=&quot;text-3xl font-bold text-gray-900&quot;&gt;Lista zajęć&lt;/h1&gt;&#10;            &lt;a th:href=&quot;@{/classes/new}&quot; class=&quot;inline-flex items-center gap-2 px-4 py-2 rounded-md bg-blue-600 text-white text-sm font-medium shadow-sm hover:bg-blue-700 transition&quot;&gt;&#10;                &lt;span class=&quot;text-lg leading-none&quot;&gt;＋&lt;/span&gt; Nowe zajęcia&#10;            &lt;/a&gt;&#10;        &lt;/div&gt;&#10;        &lt;div th:if=&quot;${success}&quot; class=&quot;p-4 rounded-md bg-green-50 border border-green-200 text-green-800 text-sm&quot; th:text=&quot;${success}&quot;&gt;&lt;/div&gt;&#10;&#10;        &lt;div class=&quot;bg-white/90 backdrop-blur rounded-lg shadow-md border border-gray-200&quot;&gt;&#10;            &lt;div class=&quot;overflow-x-auto&quot;&gt;&#10;                &lt;table class=&quot;min-w-full text-sm&quot;&gt;&#10;                    &lt;thead class=&quot;bg-gray-50 text-gray-700 text-xs uppercase tracking-wider border-b border-gray-200&quot;&gt;&#10;                    &lt;tr&gt;&#10;                        &lt;th class=&quot;px-4 py-3 text-left font-semibold&quot;&gt;ID&lt;/th&gt;&#10;                        &lt;th class=&quot;px-4 py-3 text-left font-semibold&quot;&gt;Typ&lt;/th&gt;&#10;                        &lt;th class=&quot;px-4 py-3 text-left font-semibold&quot;&gt;Instruktor&lt;/th&gt;&#10;                        &lt;th class=&quot;px-4 py-3 text-left font-semibold&quot;&gt;Sala&lt;/th&gt;&#10;                        &lt;th class=&quot;px-4 py-3 text-left font-semibold&quot;&gt;Start&lt;/th&gt;&#10;                        &lt;th class=&quot;px-4 py-3 text-left font-semibold&quot;&gt;Koniec&lt;/th&gt;&#10;                        &lt;th class=&quot;px-4 py-3 text-left font-semibold&quot;&gt;Pojemność&lt;/th&gt;&#10;                        &lt;th class=&quot;px-4 py-3 text-left font-semibold&quot;&gt;Status&lt;/th&gt;&#10;                    &lt;/tr&gt;&#10;                    &lt;/thead&gt;&#10;                    &lt;tbody class=&quot;divide-y divide-gray-100&quot;&gt;&#10;                    &lt;tr th:each=&quot;c : ${classes}&quot; class=&quot;hover:bg-blue-50/40 transition&quot;&gt;&#10;                        &lt;td class=&quot;px-4 py-3 font-medium text-gray-900&quot; th:text=&quot;${c.id}&quot;&gt;&lt;/td&gt;&#10;                        &lt;td class=&quot;px-4 py-3&quot; th:text=&quot;${c.type.name}&quot;&gt;&lt;/td&gt;&#10;                        &lt;td class=&quot;px-4 py-3&quot; th:text=&quot;${c.instructor.firstName + ' ' + c.instructor.lastName}&quot;&gt;&lt;/td&gt;&#10;                        &lt;td class=&quot;px-4 py-3&quot; th:text=&quot;${c.room.name}&quot;&gt;&lt;/td&gt;&#10;                        &lt;td class=&quot;px-4 py-3 whitespace-nowrap&quot; th:text=&quot;${#temporals.format(c.startTime, 'yyyy-MM-dd HH:mm')}&quot;&gt;&lt;/td&gt;&#10;                        &lt;td class=&quot;px-4 py-3 whitespace-nowrap&quot; th:text=&quot;${#temporals.format(c.endTime, 'yyyy-MM-dd HH:mm')}&quot;&gt;&lt;/td&gt;&#10;                        &lt;td class=&quot;px-4 py-3&quot; th:text=&quot;${c.capacity}&quot;&gt;&lt;/td&gt;&#10;                        &lt;td class=&quot;px-4 py-3&quot;&gt;&#10;                            &lt;span th:text=&quot;${c.status}&quot;&#10;                                  th:class=&quot;${'inline-flex items-center px-2.5 py-1 rounded-full text-xs font-semibold ' +&#10;                                   (c.status.name() == 'PLANNED' ? 'bg-yellow-100 text-yellow-800' :&#10;                                    c.status.name() == 'CANCELLED' ? 'bg-red-100 text-red-700' :&#10;                                    c.status.name() == 'DONE' ? 'bg-green-100 text-green-700' : 'bg-gray-100 text-gray-700')}&quot;/&gt;&#10;                        &lt;/td&gt;&#10;                    &lt;/tr&gt;&#10;                    &lt;tr th:if=&quot;${#lists.isEmpty(classes)}&quot;&gt;&#10;                        &lt;td colspan=&quot;8&quot; class=&quot;px-4 py-10 text-center text-gray-500&quot;&gt;Brak zajęć do wyświetlenia.&lt;/td&gt;&#10;                    &lt;/tr&gt;&#10;                    &lt;/tbody&gt;&#10;                &lt;/table&gt;&#10;            &lt;/div&gt;&#10;        &lt;/div&gt;&#10;    &lt;/div&gt;&#10;&lt;/section&gt;&#10;&lt;/html&gt;&#10;" />
              <option name="updatedContent" value="&lt;!DOCTYPE html&gt;&#10;&lt;html lang=&quot;pl&quot; xmlns:th=&quot;http://www.thymeleaf.org&quot; th:replace=&quot;fragments.html :: base('Lista zajęć', ~{::section})&quot;&gt;&#10;&lt;section&gt;&#10;    &lt;div class=&quot;space-y-6&quot;&gt;&#10;        &lt;div class=&quot;flex items-center justify-between&quot;&gt;&#10;            &lt;h1 class=&quot;text-3xl font-bold text-gray-900&quot;&gt;Lista zajęć&lt;/h1&gt;&#10;            &lt;a th:href=&quot;@{/classes/new}&quot; class=&quot;inline-flex items-center gap-2 px-4 py-2 rounded-md bg-blue-600 text-white text-sm font-medium shadow-sm hover:bg-blue-700 transition&quot;&gt;&#10;                &lt;span class=&quot;text-lg leading-none&quot;&gt;＋&lt;/span&gt; Nowe zajęcia&#10;            &lt;/a&gt;&#10;        &lt;/div&gt;&#10;        &lt;div th:if=&quot;${success}&quot; class=&quot;p-4 rounded-md bg-green-50 border border-green-200 text-green-800 text-sm&quot; th:text=&quot;${success}&quot;&gt;&lt;/div&gt;&#10;&#10;        &lt;div class=&quot;bg-white/90 backdrop-blur rounded-lg shadow-md border border-gray-200&quot;&gt;&#10;            &lt;div class=&quot;overflow-x-auto&quot;&gt;&#10;                &lt;table class=&quot;min-w-full text-sm&quot;&gt;&#10;                    &lt;thead class=&quot;bg-gray-50 text-gray-700 text-xs uppercase tracking-wider border-b border-gray-200&quot;&gt;&#10;                    &lt;tr&gt;&#10;                        &lt;th class=&quot;px-4 py-3 text-left font-semibold&quot;&gt;ID&lt;/th&gt;&#10;                        &lt;th class=&quot;px-4 py-3 text-left font-semibold&quot;&gt;Typ&lt;/th&gt;&#10;                        &lt;th class=&quot;px-4 py-3 text-left font-semibold&quot;&gt;Instruktor&lt;/th&gt;&#10;                        &lt;th class=&quot;px-4 py-3 text-left font-semibold&quot;&gt;Sala&lt;/th&gt;&#10;                        &lt;th class=&quot;px-4 py-3 text-left font-semibold&quot;&gt;Start&lt;/th&gt;&#10;                        &lt;th class=&quot;px-4 py-3 text-left font-semibold&quot;&gt;Koniec&lt;/th&gt;&#10;                        &lt;th class=&quot;px-4 py-3 text-left font-semibold&quot;&gt;Pojemność&lt;/th&gt;&#10;                        &lt;th class=&quot;px-4 py-3 text-left font-semibold&quot;&gt;Status&lt;/th&gt;&#10;                        &lt;th class=&quot;px-4 py-3 text-left font-semibold&quot;&gt;Akcje&lt;/th&gt;&#10;                    &lt;/tr&gt;&#10;                    &lt;/thead&gt;&#10;                    &lt;tbody class=&quot;divide-y divide-gray-100&quot;&gt;&#10;                    &lt;tr th:each=&quot;c : ${classes}&quot; class=&quot;hover:bg-blue-50/40 transition&quot;&gt;&#10;                        &lt;td class=&quot;px-4 py-3 font-medium text-gray-900&quot; th:text=&quot;${c.id}&quot;&gt;&lt;/td&gt;&#10;                        &lt;td class=&quot;px-4 py-3&quot; th:text=&quot;${c.type.name}&quot;&gt;&lt;/td&gt;&#10;                        &lt;td class=&quot;px-4 py-3&quot; th:text=&quot;${c.instructor.firstName + ' ' + c.instructor.lastName}&quot;&gt;&lt;/td&gt;&#10;                        &lt;td class=&quot;px-4 py-3&quot; th:text=&quot;${c.room.name}&quot;&gt;&lt;/td&gt;&#10;                        &lt;td class=&quot;px-4 py-3 whitespace-nowrap&quot; th:text=&quot;${#temporals.format(c.startTime, 'yyyy-MM-dd HH:mm')}&quot;&gt;&lt;/td&gt;&#10;                        &lt;td class=&quot;px-4 py-3 whitespace-nowrap&quot; th:text=&quot;${#temporals.format(c.endTime, 'yyyy-MM-dd HH:mm')}&quot;&gt;&lt;/td&gt;&#10;                        &lt;td class=&quot;px-4 py-3&quot; th:text=&quot;${c.capacity}&quot;&gt;&lt;/td&gt;&#10;                        &lt;td class=&quot;px-4 py-3&quot;&gt;&#10;                            &lt;span th:text=&quot;${c.status}&quot;&#10;                                  th:class=&quot;${'inline-flex items-center px-2.5 py-1 rounded-full text-xs font-semibold ' +&#10;                                   (c.status.name() == 'PLANNED' ? 'bg-yellow-100 text-yellow-800' :&#10;                                    c.status.name() == 'CANCELLED' ? 'bg-red-100 text-red-700' :&#10;                                    c.status.name() == 'DONE' ? 'bg-green-100 text-green-700' : 'bg-gray-100 text-gray-700')}&quot;/&gt;&#10;                        &lt;/td&gt;&#10;                        &lt;td class=&quot;px-4 py-3&quot;&gt;&#10;                            &lt;div class=&quot;flex items-center gap-2&quot;&gt;&#10;                                &lt;a th:href=&quot;@{'/classes/' + ${c.id} + '/edit'}&quot; class=&quot;inline-flex items-center px-2.5 py-1.5 rounded-md text-xs font-medium bg-indigo-600 text-white hover:bg-indigo-700 shadow-sm&quot;&gt;Edytuj&lt;/a&gt;&#10;                                &lt;form th:action=&quot;@{'/classes/' + ${c.id} + '/delete'}&quot; method=&quot;post&quot; th:object=&quot;${c}&quot; class=&quot;inline&quot; onsubmit=&quot;return confirm('Usunąć zajęcia #' + this.querySelector('[name=idHidden]').value + '?')&quot;&gt;&#10;                                    &lt;input type=&quot;hidden&quot; name=&quot;idHidden&quot; th:value=&quot;${c.id}&quot; /&gt;&#10;                                    &lt;button type=&quot;submit&quot; class=&quot;inline-flex items-center px-2.5 py-1.5 rounded-md text-xs font-medium bg-red-600 text-white hover:bg-red-700 shadow-sm&quot;&gt;&#10;                                        Usuń&#10;                                    &lt;/button&gt;&#10;                                &lt;/form&gt;&#10;                            &lt;/div&gt;&#10;                        &lt;/td&gt;&#10;                    &lt;/tr&gt;&#10;                    &lt;tr th:if=&quot;${#lists.isEmpty(classes)}&quot;&gt;&#10;                        &lt;td colspan=&quot;9&quot; class=&quot;px-4 py-10 text-center text-gray-500&quot;&gt;Brak zajęć do wyświetlenia.&lt;/td&gt;&#10;                    &lt;/tr&gt;&#10;                    &lt;/tbody&gt;&#10;                &lt;/table&gt;&#10;            &lt;/div&gt;&#10;        &lt;/div&gt;&#10;    &lt;/div&gt;&#10;    &lt;script&gt;&#10;        // Rezerwowe dodatkowe wzmocnienie potwierdzenia (jeśli inline nie zadziała)&#10;        document.addEventListener('click', function(e){&#10;            if(e.target.matches('button[data-delete-id]')){&#10;                const id = e.target.getAttribute('data-delete-id');&#10;                if(!confirm('Usunąć zajęcia #' + id + '?')){&#10;                    e.preventDefault();&#10;                }&#10;            }&#10;        });&#10;    &lt;/script&gt;&#10;&lt;/section&gt;&#10;&lt;/html&gt;" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>